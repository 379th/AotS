# Тестирование системы тем

## Проблема
Переключение тем не работает в приложении "Принятие Тени".

## Что было исправлено

### 1. useLocalStorage хук
- Убрал `useCallback` который мог вызывать проблемы
- Добавил детальное логирование для отладки
- Упростил логику обновления состояния

### 2. ThemeContext
- Упростил логику переключения тем
- Добавил детальное логирование
- Убрал лишние проверки

### 3. SettingsScreen
- Добавил индикатор текущей темы
- Добавил тестовую кнопку для переключения
- Улучшил отображение кнопок

### 4. ScreenFrame
- Добавил отладку применения темы

## Как тестировать

### Шаг 1: Запуск приложения
```bash
cd frontend
npm run dev
```

### Шаг 2: Открытие в браузере
1. Откройте `http://localhost:5173`
2. Перейдите в **Настройки** (Settings)
3. Найдите раздел "Тема оформления"

### Шаг 3: Проверка консоли
1. Откройте Developer Tools (F12)
2. Перейдите на вкладку Console
3. Нажимайте кнопки переключения тем
4. Смотрите логи в консоли

### Шаг 4: Проверка визуальных изменений
1. При переключении на светлую тему:
   - Фон должен стать светлее
   - Текст должен стать темнее
   - Границы должны стать более насыщенными

2. При переключении на темную тему:
   - Фон должен стать темнее
   - Текст должен стать светлее
   - Границы должны стать менее насыщенными

## Ожидаемые логи в консоли

При нажатии на кнопку "Светлая":
```
useLocalStorage: установка значения theme = light
useLocalStorage: сохранено в localStorage theme = light
ThemeProvider useEffect: тема изменилась на: light
ScreenFrame: тема изменена на: light
document.body.className: light
Установлены CSS переменные для светлой темы
```

## Возможные проблемы

1. **Тема не переключается визуально**:
   - Проверьте, что CSS переменные обновляются
   - Проверьте, что `document.body.className` меняется

2. **Состояние не обновляется**:
   - Проверьте логи `useLocalStorage`
   - Проверьте, что `setTheme` вызывается

3. **localStorage не сохраняет**:
   - Проверьте, что нет ошибок в консоли
   - Проверьте, что `window.localStorage` доступен

## Файлы для проверки

- `frontend/src/contexts/ThemeContext.tsx` - основная логика тем
- `frontend/src/hooks/useLocalStorage.ts` - хук для localStorage
- `frontend/src/screens/SettingsScreen.tsx` - экран настроек
- `frontend/src/components/ui/ScreenFrame.tsx` - основной контейнер
- `frontend/src/index.css` - CSS стили для тем

